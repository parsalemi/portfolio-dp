import{a as ee}from"./chunk-36HXAHSU.js";import{b as te,c as ie,d as ne,e as re}from"./chunk-W7XGWHNH.js";import{a as j}from"./chunk-IV4IEAPU.js";import{b as D,c as m,e as G,f as z,i as W,k as $,l as O,m as B,n as K,o as Z,p as H,q as J,r as Q,s as X,t as Y}from"./chunk-C6TDYET4.js";import{a as q,b as V}from"./chunk-AGWVRW6Z.js";import{a as A}from"./chunk-BDGLC6XZ.js";import{d as k,e as M}from"./chunk-VY2MS4WZ.js";import"./chunk-ZVBRR6AA.js";import{a as L,b as R}from"./chunk-BOTK6AKQ.js";import"./chunk-LYNREAIS.js";import"./chunk-74PP5OHW.js";import"./chunk-Q64FFBLU.js";import"./chunk-PZDGU76M.js";import{d as h}from"./chunk-6RETXR6U.js";import{m as F}from"./chunk-T5LH5EWW.js";import{Fb as I,Kb as t,Lb as i,Mb as p,Nb as g,Ob as u,Qb as N,Ub as S,Vb as y,_b as b,ec as r,fb as a,fc as E,gb as _,ja as x,lc as P,mc as T,na as U,vb as d,xa as f,ya as v,yb as l}from"./chunk-7ATWILSR.js";function ae(e,s){e&1&&(t(0,"div",41),r(1,"Username is required"),i())}function oe(e,s){if(e&1&&(t(0,"div",41),r(1,"Username must be at least "),t(2,"strong",42),r(3),i(),r(4," letters"),i()),e&2){let n=y().ngIf;a(3),E(n.getError("minlength").requiredLength)}}function le(e,s){e&1&&(t(0,"div",41),r(1,"Only "),t(2,"strong",43),r(3,"_"),i(),r(4," and "),t(5,"strong",43),r(6,"."),i(),r(7," is allowed"),i())}function se(e,s){if(e&1&&(g(0),d(1,ae,2,0,"div",40)(2,oe,5,1,"div",40)(3,le,8,0,"div",40),u()),e&2){let n=s.ngIf;a(),l("ngIf",n.dirty&&n.hasError("required")),a(),l("ngIf",n.dirty&&n.hasError("minlength")),a(),l("ngIf",n.dirty&&n.hasError("pattern"))}}function pe(e,s){e&1&&(t(0,"div",41),r(1,"Age is requird"),i())}function me(e,s){e&1&&(t(0,"div",41),r(1,"Don't type letters"),i())}function de(e,s){if(e&1&&(t(0,"div",41),r(1,"Must be "),t(2,"strong"),r(3),i(),r(4," digits"),i()),e&2){let n=y().ngIf;a(3),E(n.getError("minlength").requiredLength)}}function ce(e,s){if(e&1&&(g(0),d(1,pe,2,0,"div",40)(2,me,2,0,"div",40)(3,de,5,1,"div",40),u()),e&2){let n=s.ngIf;a(),l("ngIf",n.dirty&&n.hasError("required")),a(),l("ngIf",n.dirty&&n.hasError("pattern")),a(),l("ngIf",n.dirty&&n.hasError("minlength"))}}function ge(e,s){e&1&&(t(0,"div",41),r(1,"Password is required"),i())}function ue(e,s){e&1&&(t(0,"div",45),r(1,"At least 8 characters, using uppercase, lowercase, number nad symbol"),i())}function fe(e,s){if(e&1&&(g(0),d(1,ge,2,0,"div",40)(2,ue,2,0,"div",44),u()),e&2){let n=s.ngIf;a(),l("ngIf",n.dirty&&n.hasError("required")),a(),l("ngIf",n.dirty&&n.hasError("pattern"))}}function ve(e,s){e&1&&(t(0,"div",41),r(1,"Password should match"),i())}function _e(e,s){if(e&1&&(g(0),d(1,ve,2,0,"div",40),u()),e&2){let n=s.ngIf;a(),l("ngIf",n.dirty&&n.hasError("passwordShouldMatch"))}}function Se(e,s){e&1&&(t(0,"div",39),p(1,"i",46),i())}var Le=(()=>{class e{constructor(n,c,o){this.message=n,this.fb=c,this.fbNotNull=o,this._api=x(j),this.togglePass=!1,this.env=A,this.router=x(k),this.loading=!1,this.newUser=this.fbNotNull.group({username:["",[m.required,m.minLength(2),m.pattern(/^[\w.]+$/)]],age:["",[m.required,m.minLength(2),m.pattern(/^[0-9]+$/)]],gender:["male",m.required],password:this.fbNotNull.group({newPassword:["",[m.required,m.minLength(8),m.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)]],repeatNewPassword:""},{validators:[ee]}),recaptcha:[null,[m.required]]})}register(){this.loading=!0,this.sub=this._api.registerUser(this.newUser.value).subscribe({next:n=>{this.loading=!1,this.message.add({severity:"success",summary:"Registered",detail:"Enjoy shopping",life:3e3}),n.token&&(localStorage.setItem("token",n.token),setTimeout(()=>this.router.navigate(["projects/e-commerce/products"]),1e3))},error:()=>{this.loading=!1,this.message.add({severity:"error",summary:"Attempt failed",detail:"Please try again",life:3e3})}})}showPassword(){this.togglePass=!this.togglePass}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static{this.\u0275fac=function(c){return new(c||e)(_(h),_(J),_(Q))}}static{this.\u0275cmp=U({type:e,selectors:[["app-sign-up"]],standalone:!0,features:[P([h]),T],decls:57,vars:16,consts:[["password",""],["repeat",""],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","pb-28","lg:pb-0"],["position","top-center"],[1,"mb-5","text-center"],["autocomplete","off",1,"bg-basic-1100","flex","flex-col","shadow-3","rounded-lg","gap-2","w-80","max-w-80","p-5",3,"ngSubmit","formGroup"],[1,"mb-10","text-center"],[1,"flex","flex-col","gap-1","relative","mb-12","inputWrapper"],["type","text","name","username","placeholder"," ","autocomplete","off","value","","id","username","formControlName","username",1,"inputField"],["for","username",1,"inputLabel"],[1,"pi","pi-user","mr-1","text-lg"],[4,"ngIf"],[1,"flex","gap-2"],[1,"flex","flex-col","gap-1","w-1/2","relative","mb-12","inputWrapper"],["formControlName","age","type","text","placeholder"," ","name","age","autocomplete","new-password","value","","formControlName","age",1,"inputField"],["for","age",1,"inputLabel"],[1,"pi","pi-calendar-times","mr-1","text-lg"],[1,"flex","flex-col","gap-1","w-1/2","relative","inputWrapper"],["formControlName","gender","name","gender","id","gender",1,"inputSelect"],["value","male"],["value","female"],["for","gender",1,"absolute","-top-5","text-basic-500"],[1,"pi","pi-mars","mr-1","text-lg"],["formGroupName","password",1,"w-full","mb-7","self-center","border-2","border-basic-900","rounded-2xl","flex","flex-col","p-5","justify-center","gap-5"],[1,"p-2"],[1,"pi","pi-lock","mr-1","text-lg"],[1,"relative","flex","flex-col","gap-1","mb-14","inputWrapper"],["name","newPassword","autocomplete","off","placeholder"," ","value","","formControlName","newPassword",1,"inputField","mt-2",3,"type"],["for","newPassword",1,"inputLabel"],[1,"absolute","top-3","right-3","cursor-pointer","z-10",3,"click","src"],[1,"relative","flex","flex-col","gap-1","mb-5","inputWrapper"],["formControlName","repeatNewPassword","name","repeatPassword","placeholder"," ","autocomplete","off","value","","id","repeatPassword",1,"inputField",3,"type"],["for","repeatPassword",1,"inputLabel"],[1,"absolute","top-1","right-3","cursor-pointer","z-10",3,"click","src"],[1,"recaptchaContainer","ml-9"],["id","recaptcha","type","image","formControlName","recaptcha","size","normal","theme","dark",3,"siteKey"],["type","submit",1,"btn-primary","mb-3","disabled:btn-primary-disabled",3,"disabled"],[1,"text-center"],["routerLink","../login",1,"text-primary-500","underline"],[1,"loading"],["class","inputError",4,"ngIf"],[1,"inputError"],[1,"underline"],[1,"text-xl"],["class","inputError top-12 leading-none",4,"ngIf"],[1,"inputError","top-12","leading-none"],[1,"pi","pi-spin","pi-spinner","text-4xl"]],template:function(c,o){if(c&1){let w=N();t(0,"div",2),p(1,"p-toast",3),t(2,"p",4),r(3,"It may take a few minutes to sign up because the back-end will sleep when not in use."),i(),t(4,"form",5),S("ngSubmit",function(){return f(w),v(o.register())}),t(5,"h2",6),r(6,"Sign Up"),i(),t(7,"div",7),p(8,"input",8),t(9,"label",9),p(10,"i",10),r(11,"Username"),i(),d(12,se,4,3,"ng-container",11),i(),t(13,"div",12)(14,"div",13),p(15,"input",14),t(16,"label",15),p(17,"i",16),r(18,"Age"),i(),d(19,ce,4,3,"ng-container",11),i(),t(20,"div",17)(21,"select",18)(22,"option",19),r(23,"Male"),i(),t(24,"option",20),r(25,"Female"),i()(),t(26,"label",21),p(27,"i",22),r(28,"Gender"),i()()(),t(29,"fieldset",23)(30,"legend",24),p(31,"i",25),r(32,"Password"),i(),t(33,"div",26),p(34,"input",27,0),t(36,"label",28),r(37,"Password"),i(),t(38,"svg-icon",29),S("click",function(){return f(w),v(o.showPassword())}),i(),d(39,fe,3,2,"ng-container",11),i(),t(40,"div",30),p(41,"input",31,1),t(43,"label",32),r(44,"Repeat Password"),i(),d(45,_e,2,1,"ng-container",11),t(46,"svg-icon",33),S("click",function(){return f(w),v(o.showPassword())}),i()()(),t(47,"div",34),p(48,"re-captcha",35),i(),t(49,"button",36)(50,"h4"),r(51,"Sign Up"),i()(),t(52,"p",37),r(53,"Already have an account? "),t(54,"a",38),r(55,"Sign in"),i()()()(),d(56,Se,2,0,"div",39)}c&2&&(a(4),l("formGroup",o.newUser),a(8),l("ngIf",o.newUser.controls.username),a(7),l("ngIf",o.newUser.controls.age),a(15),l("type",o.togglePass?"text":"password"),a(4),b("src","",o.env.staticFileUrl,"/svg/eye-",o.togglePass.toString(),".svg"),a(),l("ngIf",o.newUser.controls.password.controls.newPassword),a(2),l("type",o.togglePass?"text":"password"),a(4),l("ngIf",o.newUser.controls.password.controls.repeatNewPassword),a(),b("src","",o.env.staticFileUrl,"/svg/eye-",o.togglePass.toString(),".svg"),a(2),l("siteKey",o.env.recaptcha.sitekey),a(),l("disabled",o.newUser.invalid),a(7),I(o.loading?56:-1))},dependencies:[X,W,Z,H,D,K,G,z,M,Y,$,B,O,R,L,V,q,F,re,ne,ie,te]})}}return e})();export{Le as SignUpComponent};
