import{a as P}from"./chunk-IHSBWCO2.js";import{a as $}from"./chunk-BDGLC6XZ.js";import{e as V}from"./chunk-VY2MS4WZ.js";import"./chunk-ZVBRR6AA.js";import{i as j,p as B,s as F}from"./chunk-T5LH5EWW.js";import{Fb as C,Ib as v,Jb as y,Kb as o,Lb as n,Mb as p,Qb as g,Ub as h,Vb as d,_b as E,bb as S,ec as a,fb as c,fc as s,gb as k,gc as I,hc as T,ja as w,mc as H,na as O,uc as m,vb as u,vc as _,xa as f,ya as x}from"./chunk-7ATWILSR.js";var q=(t,l)=>l.id,L=(t,l)=>l.code;function M(t,l){if(t&1&&(o(0,"div",9),p(1,"img",10),o(2,"div",11)(3,"p",12),a(4),n(),o(5,"p",13),a(6),m(7,"currency"),n(),o(8,"p",7),a(9),n()()()),t&2){let e=l.$implicit,i=d(4);c(),E("src","",i.env.staticFileUrl,"/productsimgs/",e.code,".webp",S),c(3),s(e.name),c(2),s(_(7,6,e.price)),c(3),I("Quantity: ",e.quantity,"")}}function D(t,l){if(t&1&&(o(0,"div",3)(1,"h4",4),a(2),n(),o(3,"div",5)(4,"div",6)(5,"h5")(6,"span",7),a(7,"Order Number: "),n(),a(8),n(),o(9,"h5")(10,"span",7),a(11,"Total: "),n(),a(12),m(13,"currency"),n()(),o(14,"div",8),v(15,M,10,8,"div",9,L),n()()()),t&2){let e=l.$implicit,i=d(3);c(2),T("",e.date.split(",")[0]," ",e.date.split(",")[1],""),c(6),s(e.id),c(4),s(_(13,4,i.calcTotalPrice(e.order))),c(3),y(e.order)}}function N(t,l){if(t&1){let e=g();o(0,"div",0)(1,"button",1),h("click",function(){f(e);let r=d(2);return x(r.goBack())}),p(2,"i",2),n(),v(3,D,17,6,"div",3,q),n()}if(t&2){let e=d();c(3),y(e)}}function U(t,l){if(t&1){let e=g();o(0,"button",1),h("click",function(){f(e);let r=d(2);return x(r.goBack())}),p(1,"i",2),n(),o(2,"div",14)(3,"h2",15),a(4,"You have no history!"),n(),o(5,"a",16),p(6,"i",17),a(7,"Continue Shopping"),n()()}}function z(t,l){t&1&&u(0,N,5,0,"div",0)(1,U,8,0),t&2&&C(l.length?0:1)}var X=(()=>{class t{constructor(e){this.location=e,this.env=$,this._api=w(P)}calcTotalPrice(e){let i=0;for(let r=0;r<e.length;r++)i+=e[r].price*e[r].quantity;return i}totalItems(e){let i=0;for(let r=0;r<e.length;r++)i+=e[r].quantity;return i}goBack(){this.location.back()}ngOnInit(){let e=localStorage.getItem("token");if(e){let i=e.split(".")[1];this.userId=JSON.parse(atob(i)).userId,this.prevOrders$=this._api.getOrderHistory(this.userId)}}static{this.\u0275fac=function(i){return new(i||t)(k(j))}}static{this.\u0275cmp=O({type:t,selectors:[["app-order-history"]],standalone:!0,features:[H],decls:2,vars:3,consts:[[1,"w-full","flex","flex-col","gap-10","items-center","justify-center","pb-28"],[1,"self-start",3,"click"],[1,"pi","pi-arrow-left","text-2xl"],[1,"w-full","md:w-10/12"],[1,"mb-2","text-center","md:text-left"],[1,"flex","flex-col","bg-basic-1100","rounded-2xl","p-5"],[1,"w-full","h-10","flex","justify-between","items-center","border-b-2","border-basic-900"],[1,"text-basic-500"],[1,"flex","flex-col","mt-5","md:flex-row","md:flex-wrap","items-start","justify-center","gap-8"],[1,"flex","gap-2","items-center","justify-between"],["alt","",1,"w-20","h-20","object-scale-down",3,"src"],[1,"flex","flex-col","gap-1","w-full","truncate"],[1,"truncate"],[1,"text-basic-300"],[1,"flex","flex-col","gap-5","items-center","justify-center"],[1,"text-center"],["routerLink","../../products",1,"btn-primary","flex-1"],[1,"pi","pi-arrow-left","text-md","mr-2"]],template:function(i,r){if(i&1&&(u(0,z,2,1),m(1,"async")),i&2){let b;C((b=_(1,1,r.prevOrders$))?0:-1,b)}},dependencies:[B,F,V],styles:["td[_ngcontent-%COMP%]{text-align:center}"]})}}return t})();export{X as OrderHistoryComponent};
