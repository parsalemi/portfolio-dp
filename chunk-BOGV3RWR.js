import{b as O,c as H,d as J,e as Q}from"./chunk-W7XGWHNH.js";import{a as D}from"./chunk-IV4IEAPU.js";import{b as R,c,e as j,f as A,i as G,k as L,m as z,q as K,s as W,t as B}from"./chunk-C6TDYET4.js";import{a as M,b as V}from"./chunk-AGWVRW6Z.js";import{a as N}from"./chunk-BDGLC6XZ.js";import{d as F,e as P}from"./chunk-VY2MS4WZ.js";import"./chunk-ZVBRR6AA.js";import{a as T,b as q}from"./chunk-BOTK6AKQ.js";import"./chunk-LYNREAIS.js";import"./chunk-74PP5OHW.js";import"./chunk-Q64FFBLU.js";import"./chunk-PZDGU76M.js";import{d}from"./chunk-6RETXR6U.js";import{m as U}from"./chunk-T5LH5EWW.js";import{Fb as w,Kb as e,Lb as t,Mb as s,Qb as b,Ub as I,Vb as _,_b as y,dc as C,ec as o,fb as a,gb as S,ja as f,lc as E,mc as k,na as x,vb as p,xa as v,ya as h,yb as m}from"./chunk-7ATWILSR.js";function X(i,u){i&1&&(e(0,"div",21),o(1,"Username is required"),t())}function Y(i,u){if(i&1){let r=b();e(0,"svg-icon",22),I("click",function(){v(r);let n=_();return h(n.showPassword())}),t()}if(i&2){let r=_();y("src","",r.env.staticFileUrl,"/svg/eye-",r.togglePassword.toString(),".svg")}}function Z(i,u){i&1&&(e(0,"div",21),o(1,"Password is required"),t())}function $(i,u){i&1&&(e(0,"div",20),s(1,"i",23),t())}var Se=(()=>{class i{constructor(r,l){this.message=r,this.fb=l,this.togglePassword=!1,this.env=N,this._api=f(D),this.router=f(F),this.loading=!1,this.signInUser=this.fb.group({username:["",[c.required]],password:["",[c.required]],recaptcha:[null,[c.required]]})}signIn(){this.loading=!0,this.sub=this._api.signInUser(this.signInUser.value).subscribe({next:r=>{this.loading=!1,r.token&&(localStorage.setItem("token",r.token),this.router.navigate(["projects/e-commerce/products"]))},error:()=>{this.loading=!1,this.message.add({severity:"error",summary:"Attempt failed",detail:"Please try again",life:3e3})}})}showPassword(){this.togglePassword=!this.togglePassword}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static{this.\u0275fac=function(l){return new(l||i)(S(d),S(K))}}static{this.\u0275cmp=x({type:i,selectors:[["app-sign-in"]],standalone:!0,features:[E([d]),k],decls:31,vars:8,consts:[["password",""],[1,"w-full","h-full","flex","flex-col","items-center","justify-center"],["position","top-center"],[1,"mb-10","text-center"],["autocomplete","off",1,"bg-basic-1100","flex","flex-col","shadow-3","rounded-lg","gap-1","w-64","p-5","max-w-64",3,"ngSubmit","formGroup"],[1,"text-center","mb-10"],[1,"flex","flex-col","gap-1","relative","mb-12","inputWrapper"],["type","text","placeholder"," ","autocomplete","off","name","username","formControlName","username","value","","id","username",1,"inputField","login"],["for","username",1,"inputLabel"],[1,"pi","pi-user","mr-1","text-lg"],["class","inputError",4,"ngIf"],[1,"flex","flex-col","gap-1","relative","mb-5","inputWrapper"],["autocomplete","new-password","placeholder"," ","id","password","name","password","formControlName","password","value","",1,"inputField","login",3,"type"],["for","password",1,"inputLabel"],[1,"pi","pi-lock","mr-1","text-lg"],[1,"absolute","top-1","right-3","cursor-pointer","z-10",3,"src"],[1,"recaptchaContainer"],["id","recaptcha","type","image","name","captcha","formControlName","recaptcha","size","normal","theme","dark",3,"siteKey"],["type","submit",1,"btn-primary","mb-3","-mt-2","disabled:btn-primary-disabled",3,"disabled"],["routerLink","../register",1,"text-primary-500","underline"],[1,"loading"],[1,"inputError"],[1,"absolute","top-1","right-3","cursor-pointer","z-10",3,"click","src"],[1,"pi","pi-spin","pi-spinner","text-4xl"]],template:function(l,n){if(l&1){let g=b();e(0,"div",1),s(1,"p-toast",2),e(2,"p",3),o(3,"It may take a few minutes to sign in because the back-end will sleep when not in use."),t(),e(4,"form",4),I("ngSubmit",function(){return v(g),h(n.signIn())}),e(5,"h1",5),o(6,"Sign In"),t(),e(7,"div",6),s(8,"input",7),e(9,"label",8),s(10,"i",9),o(11,"Username"),t(),p(12,X,2,0,"div",10),t(),e(13,"div",11),s(14,"input",12,0),e(16,"label",13),s(17,"i",14),o(18,"Password"),t(),p(19,Y,1,3,"svg-icon",15)(20,Z,2,0,"div",10),t(),e(21,"div",16),s(22,"re-captcha",17),t(),e(23,"button",18)(24,"h4"),o(25,"Sign In"),t()(),e(26,"p"),o(27,"Don't have an account? "),e(28,"a",19),o(29,"Sign up"),t()()()(),p(30,$,2,0,"div",20)}if(l&2){let g=C(15);a(4),m("formGroup",n.signInUser),a(8),m("ngIf",n.signInUser.controls.username.dirty&&n.signInUser.controls.username.hasError("required")),a(2),m("type",n.togglePassword?"text":"password"),a(5),w(g.value?19:-1),a(),m("ngIf",n.signInUser.controls.password.dirty&&n.signInUser.controls.password.hasError("required")),a(2),m("siteKey",n.env.recaptcha.sitekey),a(),m("disabled",n.signInUser.invalid),a(7),w(n.loading?30:-1)}},dependencies:[W,G,R,j,A,B,L,z,P,q,T,V,M,U,H,O,Q,J]})}}return i})();export{Se as SignInComponent};
